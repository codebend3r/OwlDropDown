var Owl=Owl||{};Owl.event=Owl.event||{},Owl.event.DROPDOWNOPENED="dropdownopened",Owl.event.DROPDOWNCLOSED="dropdownclosed",Owl.event.DROPDOWNITEMSELECTED="dropdownitemselected",Owl.event.DEFAULTSELECTED="defaultselected",$.fn.owldropdown=function(a){var b=$.extend({defaultLabel:void 0,defaultValue:-1,defaultIndex:0,innerListItemSelector:void 0,allowResetToDefault:!1,labelElement:"p",listItemElement:"ul",changeLabelOnItemClick:!0,inLineStyling:!0,clickAway:!1,closeWhenSelected:!0,enableArrowKeys:!1,labelWidth:160,labelHeight:25,dropDownWidth:160,dropDownHeight:25},a),c=this,d=!1,e=0,f="owl-dropdown",g="owl-label",h="owl-list",i=b.labelElement+"."+g,j=b.listItemElement+"."+h,k=38,l=40,m=13;return c.currentLabel=null,c.currentID=null,c.initDropdown=function(){if(b.allowResetToDefault&&"undefined"==typeof b.defaultLabel&&"undefined"==typeof b.defaultValue)throw Error("if allowResetDefault is set to true then defaultLabel and defaultValue must be defined");if(c.addClass(f),c.find(b.labelElement).addClass(g),c.find(b.listItemElement).addClass(h),c.css({width:b.labelWidth}),c.find(i).css({zIndex:c.findHighestZIndex()}),c.find(j).css({zIndex:c.findHighestZIndex()}),c.find(j).find("li").css({}),c.find(j).find("li").each(function(a){$(this).attr("buttonid",a)}),b.allowResetToDefault){var a,d=$(c.find(j).find("li")[0]).clone(),e="";$(d).addClass("default"),$(d).attr("buttonid","-1"),a="null"==typeof b.innerListItemSelector?$(d):$(d).find(b.innerListItemSelector),"null"!=typeof b.defaultValue?e=b.defaultValue:"null"!=typeof b.defaultLabel&&(e=b.defaultLabel),$(a).text(e),c.find(j).prepend(d)}if("undefined"!=typeof b.defaultLabel)c.find(i).text(b.defaultLabel);else{var k="null"==typeof b.innerListItemSelector?$(c.find(j).find("li").find(b.innerListItemSelector)[b.defaultIndex]).text().trim():$(c.find(j).find("li")[b.defaultIndex]).text().trim();c.find(i).text(k)}c.find(i).on("click",c.toggleDropDown),c.find(j).find("li").on("click",c.itemClicked)},c.getDefaultValue=function(){return"undefined"!=typeof b.defaultValue?b.defaultValue:b.defaultLabel},c.toggleDropDown=function(){return d=!d,d?c.openDropDown():c.closeDropDown(),!1},c.openDropDown=function(){d=!0,c.addClass("open"),c.find(j).addClass("open"),c.find(i).addClass("open"),b.clickAway&&($(".bg-clickaway").length||($("body").append("<div class='bg-clickaway'></div>"),$("div.bg-clickaway").css({width:"200%",height:"200%",position:"fixed",backgroundColor:"rgba(0,0,0,0.8)",display:"block",left:"0px",top:"0px",zIndex:c.findHighestZIndex()-5}),$("div.bg-clickaway").on("click",c.closeDropDown))),b.enableArrowKeys&&$(document).on("keydown",function(a){var d=c.find(j).find("li").length;if(a.keyCode==k){e-=1,-1>=e&&(e=d-1);var f="null"==typeof b.innerListItemSelector?c.find(j).find("li").find(b.innerListItemSelector)[e]:c.find(j).find("li")[e],g=$(f).text();$(f).focus(),c.find(i).text(g),a.preventDefault(),a.stopPropagation()}else if(a.keyCode==l){e+=1,e>=d&&(e=0);var f="null"==typeof b.innerListItemSelector?c.find(j).find("li").find(b.innerListItemSelector)[e]:c.find(j).find("li")[e],g=$(f).text();$(f).focus(),c.find(i).text(g),a.preventDefault(),a.stopPropagation()}else if(a.keyCode==m){var f="null"==typeof b.innerListItemSelector?c.find(j).find("li").find(b.innerListItemSelector)[e]:c.find(j).find("li")[e];$(f).trigger("click"),a.preventDefault(),a.stopPropagation()}}),c.trigger(Owl.event.DROPDOWNOPENED)},c.closeDropDown=function(){d=!1,c.removeClass("open"),c.find(j).removeClass("open"),c.find(i).removeClass("open"),$(".bg-clickaway").length&&$(".bg-clickaway").remove(),c.on("click",c.openDropDown),b.enableArrowKeys&&$(document).off("keydown"),c.trigger(Owl.event.DROPDOWNCLOSED)},c.itemClicked=function(a){c.currentLabel=$(a.currentTarget).text().trim(),c.currentID=$(a.currentTarget).attr("buttonid"),"-1"==c.currentID?(b.changeLabelOnItemClick&&c.find(i).text(b.defaultLabel),c.trigger(Owl.event.DEFAULTSELECTED,[c.getDefaultValue(),c.currentID]),c.trigger(Owl.event.DROPDOWNITEMSELECTED,[c.getDefaultValue(),c.currentID])):(b.changeLabelOnItemClick&&c.find(i).text(c.currentLabel),c.trigger(Owl.event.DROPDOWNITEMSELECTED,[c.currentLabel,c.currentID])),b.closeWhenSelected&&c.closeDropDown(),a.stopPropagation()},c.findHighestZIndex=function(a){for(var b=document.getElementsByTagName(a),c=100,d=0;d<b.length;d++){var e=document.defaultView.getComputedStyle(b[d],null).getPropertyValue("z-index");e>c&&"auto"!=e&&(c=e)}return c},c.initDropdown(),c};